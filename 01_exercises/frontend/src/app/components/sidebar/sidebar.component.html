<div class="sidebar-container">
  <mat-toolbar color="primary" class="fixed-toolbar">
    <div class="bank-logo">
      <mat-icon class="menu-icon">smart_toy</mat-icon>
      <span class="bank-name">Chat Sessions</span>
    </div>
  </mat-toolbar>

  <!-- New Session Button -->
  <div class="new-session-section">
    <button mat-raised-button 
            color="primary" 
            class="new-session-btn"
            (click)="createNewSession()"
            [disabled]="isLoadingSessions">
      <mat-icon>add</mat-icon>
      <span>New Chat</span>
    </button>
  </div>

  <!-- Loading indicator -->
  <div class="loading-section" *ngIf="isLoadingSessions">
    <mat-progress-spinner diameter="30" mode="indeterminate"></mat-progress-spinner>
    <span class="loading-text">Loading sessions...</span>
  </div>

  <!-- Sessions List -->
  <div class="sessions-section" *ngIf="!isLoadingSessions">
    <div class="section-header">
      <h3>Recent Conversations</h3>
      <span class="session-count">{{ sessions.length }}</span>
    </div>

    <mat-nav-list class="sessions-list" *ngIf="sessions.length > 0">
      <mat-list-item 
        *ngFor="let session of sessions; trackBy: trackBySessionId"
        class="session-item"
        [ngClass]="{'active-session': isActiveSession(session.sessionId)}"
        (click)="openSession(session.sessionId)">
        
        <div class="session-content">
          <div class="session-header">
            <mat-icon matListItemIcon class="session-icon">chat</mat-icon>
            <span class="session-name" [title]="session.name">
              {{ getSessionDisplayName(session.name) }}
            </span>
          </div>
          
          <div class="session-meta">
            <span class="session-id">{{ session.sessionId.substring(0, 8) }}...</span>
            <button mat-icon-button 
                    class="delete-btn"
                    (click)="deleteSession(session.sessionId, $event)"
                    [title]="'Delete session: ' + session.name">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </div>
      </mat-list-item>
    </mat-nav-list>

    <!-- Empty state -->
    <div class="empty-state" *ngIf="sessions.length === 0">
      <mat-icon class="empty-icon">chat_bubble_outline</mat-icon>
      <h4>No conversations yet</h4>
      <p>Start a new chat session to begin</p>
      <button mat-stroked-button 
              color="primary"
              (click)="createNewSession()">
        <mat-icon>add</mat-icon>
        Start Chatting
      </button>
    </div>
  </div>

  <!-- User Info Section -->
  <div class="user-info-section">
    <mat-divider></mat-divider>
    <div class="user-info">
      <mat-icon class="user-icon">person</mat-icon>
      <span class="username">{{ loggedInUser }}</span>
      <button mat-icon-button 
              class="refresh-btn"
              (click)="loadSessions()"
              [disabled]="isLoadingSessions"
              title="Refresh sessions">
        <mat-icon>refresh</mat-icon>
      </button>
    </div>
  </div>
</div>